<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Game T√†i X·ªâu - T·ª∑ l·ªá th·∫Øng 40%</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
            padding: 20px;
        }
        .dice {
            font-size: 80px;
            margin: 10px;
        }
        button {
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
        }
        #gameResult {
            margin-top: 20px;
            font-size: 20px;
            white-space: pre-line;
        }
    </style>
</head>
<body>
    <h1>üé≤ Game T√†i X·ªâu üé≤</h1>

    <p>S·ªë d∆∞: <span id="soDu">1000</span>üí∞</p>

    <label for="cuocChon">Ch·ªçn c∆∞·ª£c:</label>
    <select id="cuocChon">
        <option value="tai">T√†i (11-17)</option>
        <option value="xiu">X·ªâu (4-10)</option>
    </select>

    <br><br>

    <label for="tienCuoc">Ti·ªÅn c∆∞·ª£c:</label>
    <input type="number" id="tienCuoc" placeholder="Nh·∫≠p s·ªë ti·ªÅn" />

    <br><br>

    <button id="btnQuay" onclick="choiTaiXiu()">Quay</button>

    <div style="margin-top: 20px;">
        <span class="dice" id="dice1">üé≤</span>
        <span class="dice" id="dice2">üé≤</span>
        <span class="dice" id="dice3">üé≤</span>
    </div>

    <div id="gameResult"></div>
    <div id="countdown"></div>

    <script>
        let soDu = 1000;
        const diceUnicode = ["‚öÄ", "‚öÅ", "‚öÇ", "‚öÉ", "‚öÑ", "‚öÖ"];

        function capNhatSoDu() {
            document.getElementById("soDu").innerText = soDu;
        }

        function demNguoc() {
            let dem = 5;
            const countdown = document.getElementById("countdown");
            const interval = setInterval(() => {
                countdown.innerText = `‚è≥ Ch·ªù ${dem}s ƒë·ªÉ quay ti·∫øp...`;
                dem--;
                if (dem < 0) {
                    clearInterval(interval);
                    countdown.innerText = "";
                    document.getElementById("btnQuay").disabled = false;
                }
            }, 1000);
        }

        function rollAnimation(callback) {
            let count = 10;
            const interval = setInterval(() => {
                document.getElementById("dice1").textContent = diceUnicode[Math.floor(Math.random() * 6)];
                document.getElementById("dice2").textContent = diceUnicode[Math.floor(Math.random() * 6)];
                document.getElementById("dice3").textContent = diceUnicode[Math.floor(Math.random() * 6)];
                count--;
                if (count <= 0) {
                    clearInterval(interval);
                    callback();
                }
            }, 100);
        }

        function choiTaiXiu() {
            const datCuoc = document.getElementById("cuocChon").value;
            const tienCuoc = parseInt(document.getElementById("tienCuoc").value);

            if (!tienCuoc || tienCuoc <= 0) return alert("S·ªë ti·ªÅn c∆∞·ª£c kh√¥ng h·ª£p l·ªá.");
            if (tienCuoc > soDu) return alert("Kh√¥ng ƒë·ªß ti·ªÅn ƒë·ªÉ c∆∞·ª£c.");

            document.getElementById("btnQuay").disabled = true;
            document.getElementById("gameResult").innerText = "";
            document.getElementById("countdown").innerText = "";

            rollAnimation(() => {
                const win = Math.random() < 0.4; // 40% th·∫Øng
                let x1, x2, x3, tong, ketQua;

                if (win) {
                    do {
                        x1 = Math.floor(Math.random() * 6) + 1;
                        x2 = Math.floor(Math.random() * 6) + 1;
                        x3 = Math.floor(Math.random() * 6) + 1;
                        tong = x1 + x2 + x3;
                        ketQua = (tong >= 4 && tong <= 10) ? "xiu" : "tai";
                    } while (ketQua !== datCuoc);
                } else {
                    do {
                        x1 = Math.floor(Math.random() * 6) + 1;
                        x2 = Math.floor(Math.random() * 6) + 1;
                        x3 = Math.floor(Math.random() * 6) + 1;
                        tong = x1 + x2 + x3;
                        ketQua = (tong >= 4 && tong <= 10) ? "xiu" : "tai";
                    } while (ketQua === datCuoc);
                }

                document.getElementById("dice1").textContent = diceUnicode[x1 - 1];
                document.getElementById("dice2").textContent = diceUnicode[x2 - 1];
                document.getElementById("dice3").textContent = diceUnicode[x3 - 1];

                let ketQuaText = `T·ªïng: ${tong} ‚Üí ${ketQua.toUpperCase()}`;

                if (ketQua === datCuoc) {
                    soDu += tienCuoc;
                    ketQuaText += `\n‚úÖ B·∫°n ƒë√£ th·∫Øng +${tienCuoc}üí∞`;
                } else {
                    soDu -= tienCuoc;
                    ketQuaText += `\n‚ùå B·∫°n ƒë√£ thua -${tienCuoc}üí∞`;
                }

                document.getElementById("gameResult").innerText = ketQuaText;
                capNhatSoDu();
                demNguoc();

                document.getElementById("tienCuoc").value = '';
            });
        }
    </script>
</body>
</html>

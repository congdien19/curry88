<!DOCTYPE html>
<html>
<head>
    <title>Game T√†i X·ªâu - Java Web</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body {
            background-image: url('https://images.unsplash.com/photo-1551739440-9a25a812bde0'); /* Background li√™n quan c·ªù b·∫°c */
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            color: white;
            min-height: 100vh;
        }

        .bg-overlay {
            background-color: rgba(0, 0, 0, 0.7);
            padding: 30px;
            border-radius: 15px;
        }

        .dice-icon {
            font-size: 60px;
            display: inline-block;
            width: 70px;
            text-align: center;
        }

        .result {
            font-size: 20px;
            font-weight: bold;
        }

        .list-group-item {
            background-color: white !important;
            color: black;
        }
    </style>
</head>
<body>
<div class="container py-5">
    <div class="bg-overlay">
        <h1 class="text-center mb-4">üé≤ Game T√†i X·ªâu</h1>

        <div class="row mb-4 justify-content-center">
            <div class="col-md-6">
                <label for="tienCuoc">S·ªë ti·ªÅn c∆∞·ª£c:</label>
                <input type="number" id="tienCuoc" class="form-control" placeholder="Nh·∫≠p s·ªë ti·ªÅn..." value="0">
            </div>
            <div class="col-md-6">
                <label for="cuocChon">Ch·ªçn c∆∞·ª£c:</label>
                <select id="cuocChon" class="form-select">
                    <option value="tai">T√†i</option>
                    <option value="xiu">X·ªâu</option>
                </select>
            </div>
        </div>

        <div class="text-center mb-3">
            <button id="btnQuay" class="btn btn-success btn-lg" onclick="choiTaiXiu()">Quay</button>
            <p id="countdown" class="mt-2 text-warning"></p>
        </div>

        <div class="text-center">
            <span id="dice1" class="dice-icon me-2">üé≤</span>
            <span id="dice2" class="dice-icon me-2">üé≤</span>
            <span id="dice3" class="dice-icon">üé≤</span>
            <div id="gameResult" class="result mt-3"></div>
        </div>

        <div class="mt-4">
            <h4>S·ªë d∆∞: <span id="soDu">1000</span> üí∞</h4>
            <h5 class="mt-3">L·ªãch s·ª≠:</h5>
            <ul id="lichSu" class="list-group"></ul>
        </div>
    </div>
</div>

<script>
    let soDu = 1000;
    const diceUnicode = ["‚öÄ", "‚öÅ", "‚öÇ", "‚öÉ", "‚öÑ", "‚öÖ"];

    function capNhatSoDu() {
        document.getElementById("soDu").innerText = soDu;
    }

    function capNhatLichSu(tien, luaChon, tong, ketQua) {
        const li = document.createElement("li");
        li.className = "list-group-item";
        li.innerText = `üíµ ƒê·∫∑t ${tien} v√†o ${luaChon.toUpperCase()} ‚Üí T·ªïng ${tong} ‚Üí ${ketQua}`;
        document.getElementById("lichSu").prepend(li);
    }

    function demNguoc() {
        let time = 3;
        const interval = setInterval(() => {
            document.getElementById("countdown").innerText = `‚è≥ ƒê·ª£i ${time--}s ƒë·ªÉ ch∆°i ti·∫øp...`;
            if (time < 0) {
                clearInterval(interval);
                document.getElementById("btnQuay").disabled = false;
                document.getElementById("countdown").innerText = "";
            }
        }, 1000);
    }

    function rollAnimation(callback) {
        let count = 0;
        const interval = setInterval(() => {
            document.getElementById("dice1").textContent = diceUnicode[Math.floor(Math.random() * 6)];
            document.getElementById("dice2").textContent = diceUnicode[Math.floor(Math.random() * 6)];
            document.getElementById("dice3").textContent = diceUnicode[Math.floor(Math.random() * 6)];
            count++;
            if (count >= 15) {
                clearInterval(interval);
                callback();
            }
        }, 100);
    }

    function choiTaiXiu() {
        const datCuoc = document.getElementById("cuocChon").value;
        const tienCuoc = parseInt(document.getElementById("tienCuoc").value);

        if (!tienCuoc || tienCuoc <= 0) return alert("S·ªë ti·ªÅn c∆∞·ª£c kh√¥ng h·ª£p l·ªá.");
        if (tienCuoc > soDu) return alert("Kh√¥ng ƒë·ªß ti·ªÅn ƒë·ªÉ c∆∞·ª£c.");

        document.getElementById("btnQuay").disabled = true;
        document.getElementById("gameResult").innerText = "";
        document.getElementById("countdown").innerText = "";

        rollAnimation(() => {
            const x1 = Math.floor(Math.random() * 6) + 1;
            const x2 = Math.floor(Math.random() * 6) + 1;
            const x3 = Math.floor(Math.random() * 6) + 1;

            document.getElementById("dice1").textContent = diceUnicode[x1 - 1];
            document.getElementById("dice2").textContent = diceUnicode[x2 - 1];
            document.getElementById("dice3").textContent = diceUnicode[x3 - 1];

            const tong = x1 + x2 + x3;
            const ketQua = (tong >= 4 && tong <= 10) ? "xiu" : "tai";
            let ketQuaText = `T·ªïng: ${tong} ‚Üí ${ketQua.toUpperCase()}\n`;

            if (ketQua === datCuoc) {
                soDu += tienCuoc;
                ketQuaText += `‚úÖ B·∫°n ƒë√£ th·∫Øng +${tienCuoc}üí∞`;
            } else {
                soDu -= tienCuoc;
                ketQuaText += `‚ùå B·∫°n ƒë√£ thua -${tienCuoc}üí∞`;
            }

            document.getElementById("gameResult").innerText = ketQuaText;
            capNhatSoDu();
            capNhatLichSu(tienCuoc, datCuoc, tong, ketQuaText);
            document.getElementById("tienCuoc").value = 0; // Reset s·ªë ti·ªÅn c∆∞·ª£c
            demNguoc();
        });
    }
</script>
</body>
</html>
